<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>D’s Office — Under Maintenance</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-dark:#080814;
      --bg-dark-2:#0f0f1a;
      --glass: rgba(255,255,255,0.06);
      --neon:#00e6ff;
      --accent:#8b5cf6;
      --text:#e6eef8;
      --muted:rgba(230,238,248,0.7);
    }

    html,body{height:100%;margin:0;padding:0;font-family:"Poppins",system-ui,Segoe UI,Roboto,Arial; color:var(--text);}
    body{
      background: radial-gradient(1200px 600px at 10% 20%, rgba(139,92,246,0.12), transparent 10%),
                  radial-gradient(900px 500px at 90% 80%, rgba(0,230,255,0.07), transparent 10%),
                  linear-gradient(180deg,var(--bg-dark),var(--bg-dark-2));
      display:flex;align-items:center;justify-content:center;
      padding:32px;
    }

    .card{
      width:100%;
      max-width:920px;
      border-radius:18px;
      padding:36px;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      box-shadow: 0 12px 40px rgba(2,6,23,0.7);
      display:grid;grid-template-columns: 1fr 360px;gap:28px;align-items:center;
    }

    /* Left content */
    .brand{
      display:flex;align-items:center;gap:14px;
    }
    .logo {
      width:72px;height:72px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg,var(--accent),var(--neon));
      box-shadow: 0 6px 20px rgba(0,0,0,0.6), 0 0 18px rgba(0,230,255,0.08);
      color:white;font-weight:800;font-size:20px;
      transform: translateZ(0);
    }
    .title{font-size:22px;font-weight:700;margin:0;}
    .subtitle{color:var(--muted);margin-top:6px;font-size:14px;}

    .headline { margin-top:20px;font-size:30px;font-weight:800;letter-spacing:-0.6px; color:var(--text); text-shadow: 0 6px 28px rgba(139,92,246,0.07);}
    .desc { margin-top:12px;color:var(--muted);line-height:1.5; }

    /* neon status */
    .status {
      display:inline-block;margin-top:16px;padding:10px 14px;border-radius:999px;
      box-shadow: 0 6px 30px rgba(0,230,255,0.06), inset 0 -4px 12px rgba(0,0,0,0.25);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      color:var(--neon);font-weight:700;font-size:13px;
      border:1px solid rgba(0,230,255,0.08);
      text-transform:uppercase;
      letter-spacing:1px;
    }

    /* Right column */
    .side {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;padding:22px;
      display:flex;flex-direction:column;align-items:center;gap:16px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.6);
    }

    .countdown {
      display:flex;gap:10px;width:100%;justify-content:space-between;
    }
    .time-box{
      flex:1;background:var(--glass);border-radius:10px;padding:12px;text-align:center;
      backdrop-filter: blur(6px);
    }
    .time-num{font-weight:800;font-size:20px}
    .time-label{font-size:12px;color:var(--muted);margin-top:6px}

    .actions{display:flex;gap:10px;width:100%;margin-top:6px}
    .btn{
      flex:1;padding:10px 12px;border-radius:10px;border:0;font-weight:700;cursor:pointer;
      background:linear-gradient(90deg,var(--accent),var(--neon));color:white;
      box-shadow: 0 8px 20px rgba(139,92,246,0.12);
    }
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    /* toggle */
    .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
    .toggle{
      width:46px;height:26px;background:rgba(255,255,255,0.06);border-radius:999px;padding:3px;display:flex;align-items:center;
    }
    .knob{width:20px;height:20px;border-radius:50%;background:white;transform:translateX(0);transition:transform 200ms ease;}

    /* footer small */
    .small{font-size:12px;color:var(--muted);margin-top:12px;text-align:center}

    /* responsive */
    @media (max-width:880px){
      .card{grid-template-columns:1fr; padding:24px;}
      .side{order:2}
    }

    /* subtle pulse animation */
    .logo::after{
      content:"";position:absolute;width:120px;height:120px;border-radius:20px;
      filter: blur(30px);opacity:0.12;z-index:-1;left: -12px;top:-16px;
      background: radial-gradient(circle at 30% 20%, rgba(139,92,246,0.8), transparent 20%),
                  radial-gradient(circle at 80% 80%, rgba(0,230,255,0.8), transparent 20%);
      animation: pulse 3s infinite;
    }
    @keyframes pulse{0%{transform:scale(0.98)}50%{transform:scale(1.03)}100%{transform:scale(0.98)}}
  </style>
</head>
<body>
  <main class="card" role="main" aria-labelledby="maint-title">
    <!-- LEFT -->
    <section>
      <div class="brand">
        <div style="position:relative;">
          <div class="logo" aria-hidden="true">
            <!-- If you have a logo image, replace the text below with an <img> -->
            D’s
          </div>
        </div>

        <div>
          <h1 id="maint-title" class="title">D’s Office</h1>
          <div class="subtitle">Official website — temporary downtime</div>
        </div>
      </div>

      <h2 class="headline">We’re performing scheduled maintenance</h2>
      <p class="desc">Thanks for your patience — we’re making improvements behind the scenes. The site will be back shortly with a better experience.</p>

      <span class="status">Maintenance ongoing</span>

      <p class="small">If you need urgent help, contact: <strong>support@dsoffice.online</strong></p>
    </section>

    <!-- RIGHT -->
    <aside class="side" aria-label="Maintenance status and countdown">
      <div style="width:100%;text-align:center">
        <div style="font-weight:800;font-size:16px">Estimated return</div>
        <div style="color:var(--muted);font-size:13px;margin-top:6px">
          <%= (launchLabel) ? launchLabel : 'Scheduled update' %>
        </div>
      </div>

      <div class="countdown" role="timer" aria-live="polite" id="countdown">
        <div class="time-box">
          <div class="time-num" id="days">—</div>
          <div class="time-label">Days</div>
        </div>
        <div class="time-box">
          <div class="time-num" id="hours">—</div>
          <div class="time-label">Hours</div>
        </div>
        <div class="time-box">
          <div class="time-num" id="mins">—</div>
          <div class="time-label">Minutes</div>
        </div>
        <div class="time-box">
          <div class="time-num" id="secs">—</div>
          <div class="time-label">Seconds</div>
        </div>
      </div>

      <div class="actions">
        <button class="btn" id="notifyBtn">Notify me</button>
        <button class="btn ghost" id="homeBtn" onclick="window.location.href='/'">Home</button>
      </div>

      <div class="controls" style="width:100%;justify-content:center">
        <div style="font-size:13px;color:var(--muted)">Dark / Light</div>
        <div class="toggle" id="themeToggle" role="switch" aria-checked="true" tabindex="0">
          <div class="knob" id="knob"></div>
        </div>
      </div>

      <div class="small">Page created for D’s Office • Last updated: <%= (updatedAt) ? updatedAt : new Date().toLocaleDateString() %></div>
    </aside>
  </main>

  <script>
    // ---------- CONFIG ----------
    // Pass `launchDate` as an ISO string when rendering from Express, e.g.
    // res.render('under-maintenance', { launchDate: '2025-12-01T08:00:00Z', launchLabel: 'Dec 1, 2025 — 8:00 UTC' })
    const launchISO = '<%= (typeof launchDate !== "undefined") ? launchDate : "" %>';
    const fallbackDate = new Date(Date.now() + 1000 * 60 * 60 * 24 * 2).toISOString(); // +2 days fallback
    const target = new Date(launchISO || fallbackDate);

    // Countdown compute & update
    function updateCountdown() {
      const now = new Date();
      let diff = Math.max(0, target - now);
      const days = Math.floor(diff / (1000*60*60*24));
      diff -= days * (1000*60*60*24);
      const hours = Math.floor(diff / (1000*60*60));
      diff -= hours * (1000*60*60);
      const mins = Math.floor(diff / (1000*60));
      diff -= mins * (1000*60);
      const secs = Math.floor(diff / 1000);

      document.getElementById('days').textContent = String(days).padStart(2,'0');
      document.getElementById('hours').textContent = String(hours).padStart(2,'0');
      document.getElementById('mins').textContent = String(mins).padStart(2,'0');
      document.getElementById('secs').textContent = String(secs).padStart(2,'0');

      if (target - now <= 0) {
        clearInterval(timerInterval);
        document.getElementById('countdown').innerHTML = '<div style="width:100%;text-align:center;color:var(--neon);font-weight:800">We are back online!</div>';
      }
    }
    const timerInterval = setInterval(updateCountdown, 1000);
    updateCountdown();

    // ---------- Theme toggle ----------
    const root = document.documentElement;
    const toggle = document.getElementById('themeToggle');
    const knob = document.getElementById('knob');

    // initial theme = dark
    let dark = true;

    function applyTheme() {
      if (dark) {
        root.style.setProperty('--bg-dark','#080814');
        root.style.setProperty('--bg-dark-2','#0f0f1a');
        knob.style.transform = 'translateX(0)';
      } else {
        root.style.setProperty('--bg-dark','#f7f9fc');
        root.style.setProperty('--bg-dark-2','#eef2f8');
        root.style.setProperty('--glass','rgba(2,6,23,0.04)');
        root.style.setProperty('--text','#0b1220');
        knob.style.transform = 'translateX(20px)';
      }
    }

    toggle.addEventListener('click', ()=>{ dark = !dark; applyTheme(); toggle.setAttribute('aria-checked', String(!dark)); });
    toggle.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle.click(); }});
    applyTheme();

    // ---------- Notify button (simple demo) ----------
    document.getElementById('notifyBtn').addEventListener('click', function(){
      // Demo: opens mail client with subject (replace or enhance with real subscription)
      const subject = encodeURIComponent("Notify me when D's Office is back");
      const body = encodeURIComponent("Hello team,\n\nPlease notify me when D's Office website is back online.\n\nThanks.");
      window.location.href = `mailto:support@dsoffice.online?subject=${subject}&body=${body}`;
    });
  </script>
</body>
</html>
